# Tmux 快捷键速查表

> Prefix 键: `Ctrl+d` （按住 Ctrl 按 d，然后松开，再按其他键）
> 快捷键方案: Prefix + 单键 / F1-F12 直达
> 基于 TheCW 配置，部分快捷键做了调整

---

## 🎯 Prefix 键 (前缀键)

| 快捷键 | 说明 |
|--------|------|
| `Ctrl+d` | **Prefix 键** - 所有 tmux 命令的前缀 |
| `Ctrl+d` 按两次 | 发送 `Ctrl+d` 到当前程序 |

---

## 📁 Session (会话)

| 快捷键 | 说明 |
|--------|------|
| `tmux new` | 创建新会话 |
| `tmux ls` | 列出所有会话 |
| `tmux attach` | 重新连接最后一个会话 |
| `tmux attach -t <name>` | 连接指定会话 |
| `Prefix + C-c` | 创建新会话 |
| `Prefix + d` | 分离当前会话（保持后台运行） |
| `Prefix + D` | 选择要切换的客户端 |
| `Prefix + X` | 关闭当前会话（确认后） |
| `Prefix + .` | 重命名会话 |

---

## 🪟 Window (窗口)

| 快捷键 | 说明 |
|--------|------|
| `F1~F9` | **切换到第 1-9 个窗口** (直达，无需 Prefix) |
| `F10` | **新建窗口** (直达) |
| `F11` | **关闭当前面板** (直达) |
| `Prefix + o` | 新建窗口 |
| `Prefix + q` | 关闭当前面板 |
| `Prefix + ,` | 重命名窗口 |
| `Prefix + n` | 下一个窗口 |
| `Prefix + p` | 上一个窗口 |
| `Prefix + C-n` | 下一个窗口（可重复） |
| `Prefix + C-p` | 上一个窗口（可重复） |
| `Prefix + <` | 将窗口左移 |
| `Prefix + >` | 将窗口右移 |
| `Prefix + &` | 关闭当前窗口 |
| `Prefix + w` | 列出所有窗口 |
| `Prefix + f` | 查找窗口 |

---

## ✂️ Pane (面板/分屏)

### 创建分屏

| 快捷键 | 说明 |
|--------|------|
| `Prefix + u` | **向上分屏** |
| `Prefix + e` | **向下分屏** |
| `Prefix + n` | **向左分屏** |
| `Prefix + i` | **向右分屏** |
| `Prefix + "` | 上下分屏（默认） |
| `Prefix + %` | 左右分屏（默认） |

### 切换面板

| 快捷键 | 说明 |
|--------|------|
| `Prefix + h` | 向左切换面板 |
| `Prefix + j` | 向下切换面板 |
| `Prefix + k` | 向上切换面板 |
| `Prefix + l` | 向右切换面板 |
| `Prefix + ←` | 向左切换面板（方向键） |
| `Prefix + ↓` | 向下切换面板（方向键） |
| `Prefix + ↑` | 向上切换面板（方向键） |
| `Prefix + →` | 向右切换面板（方向键） |
| `Prefix + q` | 显示面板编号，按数字切换 |
| `Prefix + ;` | 切换到上一个活动面板 |
| `Prefix + o` | 切换到下一个面板 |

### 调整面板大小

| 快捷键 | 说明 |
|--------|------|
| `Prefix + H` | 向左扩大 |
| `Prefix + J` | 向下扩大 |
| `Prefix + K` | 向上扩大 |
| `Prefix + L` | 向右扩大 |
| `Prefix + f` | **最大化/恢复当前面板** |

### 面板操作

| 快捷键 | 说明 |
|--------|------|
| `Prefix + x` | 关闭当前面板 |
| `Prefix + !` | 将当前面板变为新窗口 |
| `Prefix + z` | 最大化当前面板（再按恢复） |
| `Prefix + <` | 交换到上一个面板 |
| `Prefix + >` | 交换到下一个面板 |
| `Prefix + |` | 交换面板位置 |
| `Prefix + Space` | 切换面板布局 |
| `Prefix + C-g` | 同步所有面板的输入（多机操作神器） |

---

## 📋 复制模式 (Copy Mode)

复制模式是 tmux 最强大的功能之一，特别适合与 iTerm2 配合解决鼠标冲突问题。

### 基础操作

| 快捷键 | 说明 |
|--------|------|
| `F12` 或 `Prefix + v` | **进入复制模式** |
| `q` / `Esc` | 退出复制模式 |
| `Enter` | 退出并保留光标位置 |

### 光标移动（Vim 风格）

| 快捷键 | 说明 |
|--------|------|
| `h/j/k/l` | 左/下/上/右移动 |
| `w` | 跳到下一个单词开头 |
| `e` | 跳到当前单词结尾 |
| `b` | 跳到上一个单词开头 |
| `0` | 跳到行首 |
| `^` | 跳到行首第一个非空字符 |
| `$` | 跳到行尾 |
| `gg` | 跳到文件开头 |
| `G` | 跳到文件结尾 |
| `{` / `}` | 向上/向下跳一个段落 |

### 精确跳转（长单词/行内定位神器）

| 快捷键 | 说明 | 示例 |
|--------|------|------|
| `f + 字符` | 跳到下一个该字符 | `fc` 跳到下一个 c |
| `F + 字符` | 反向跳到该字符 | `Fc` 跳到上一个 c |
| `t + 字符` | 跳到该字符前一位 | `t:` 跳到冒号前 |
| `T + 字符` | 反向跳到该字符后一位 | `T:` 跳到冒号后 |
| `;` | 重复上次 f/t/F/T 搜索 |
| `,` | 反向重复上次 f/t/F/T 搜索 |

### 搜索跳转

| 快捷键 | 说明 |
|--------|------|
| `/关键词` | 向下搜索 |
| `?关键词` | 向上搜索 |
| `n` | 下一个匹配 |
| `N` | 上一个匹配 |

### 选择与复制

| 快捷键 | 说明 |
|--------|------|
| `v` | 开始选择（字符模式） |
| `V` | 行选择 |
| `Ctrl + v` | 块选择（矩形） |
| `y` | 复制并退出（使用 pbcopy，可直接粘贴到 Mac） |
| `Y` | 复制到行尾 |
| `Space` | 开始选择，再次按结束选择 |

### 滚动

| 快捷键 | 说明 |
|--------|------|
| `Ctrl + u` | 向上滚动5行 |
| `Ctrl + d` | 向下滚动5行 |
| `Ctrl + b` | 向上滚动一页 |
| `Ctrl + f` | 向下滚动一页 |

### 缓冲区操作

| 快捷键 | 说明 |
|--------|------|
| `Prefix + b` | 列出所有缓冲区 |
| `Prefix + p` | 粘贴最后一个缓冲区内容 |
| `Prefix + =` | 选择缓冲区并粘贴 |

---

## 🖱️ iTerm2 与 tmux 配合技巧

### 鼠标支持（已启用）

tmux 启用了鼠标支持，可以用鼠标：
- 点击切换面板
- 拖动调整面板大小
- 滚动查看历史输出
- 选择并复制文本

### iTerm2 原生功能冲突解决

当需要 iTerm2 的 Option+点击功能时：

| 场景 | 按键 |
|------|------|
| Option + 点击跳转光标 | `Fn + Option + 点击` |
| 强制 iTerm2 处理点击 | `Cmd + Option + 点击` |
| Cmd + 点击链接 | 直接在浏览器打开链接 |

## ⚙️ 其他操作

| 快捷键 | 说明 |
|--------|------|
| `Prefix + r` | 重新加载配置 |
| `Prefix + R` | 重新加载配置（显示提示） |
| `Prefix + :` | 命令模式 |
| `Prefix + ?` | 列出所有快捷键 |
| `Prefix + t` | 显示时钟 |

---

## 🔌 插件快捷键

### tmux-resurrect (会话保存/恢复)

| 快捷键 | 说明 |
|--------|------|
| `Prefix + S` | 保存当前会话 |
| `Prefix + R` | 恢复上次保存的会话 |

### tmux-continuum (自动保存)

- 每5分钟自动保存会话
- 启动时自动恢复上次会话

---

## 💡 使用技巧

1. **SSH 会话保持**: 在远程服务器上使用 tmux，即使断网，重新连接后运行 `tmux attach` 即可恢复
2. **多窗口开发**: 使用 `F1~F9` 快速切换窗口，无需按 Prefix
3. **监控多个日志**: 使用分屏功能同时监控多个日志文件
4. **同步输入**: `Prefix + C-g` 可以在所有面板同步输入，适合同时在多台机器执行相同命令
5. **快速定位长单词**: 进入复制模式后，用 `f + 字符` 精确跳转到指定位置
6. **鼠标与键盘配合**: 启用 mouse 后用鼠标选择/调整，需要 Option+点击时用 `Fn + Option + 点击`

---

## 📚 常用命令

```bash
# 启动新会话
tmux

# 启动命名会话
tmux new -s mysession

# 列出会话
tmux ls

# 连接会话
tmux attach -t mysession

# 杀死会话
tmux kill-session -t mysession

# 杀死所有会话
tmux kill-server
```
